jQuery(document).ready(function(n){window.App=window.App||{},App.isScrollTopBody=!0,App.winLocHash=window.location.hash,App.$body=n("body"),App.$htmlBody=n("html, body"),App.$modelsMenu=n(".slider-menu .models-menu"),App.$productsMobile=n(".products-mobile"),App.$headerMobile=n(".header-mobile"),App.$currentProduct=null,App.$nextProduct=null,App.$body.on("click touch",".open-dialog, .open-popup, .open-form, .open-modal",function(e){e.preventDefault();var e=n(this).attr("href"),t=n(".dialogs");let a=t.find(e);var o=t.find(".flex-popup"),i=e.slice(1);return"policy"!==i&&localStorage.setItem("popup",i),"list"===i&&(App.$body.css({"overflow-y":"hidden"}),t.css({"overflow-y":"hidden"})),t.find(".popup").removeClass("active").hide(),a.length?(t.find(".popup").removeClass("active").hide(),a.show(),t.show(),o.addClass("popup--"+i),t.animate({opacity:1},300,()=>{a.addClass("active"),App.$body.css({"overflow-y":"hidden"})})):console.log(`Попап с ID ${e} не найден.`),!1}),n(".dialogs").on("click touch",".close, .close-bg",function(){let e=n(".dialogs"),t=e.find(".flex-popup");var a,o,i=e.find(".popup.active").attr("id");let r=()=>{App.$body.css({"overflow-y":"auto"})},l=()=>{t.removeClass(function(e,t){return(t.match(/popup--\S+/g)||[]).join(" ")})},s=t.find(".popup.active");"cart"===i?s.animate({right:"-100%",opacity:0},600,function(){e.animate({opacity:0},300,function(){e.find(".popup").removeClass("active").hide(),s.removeAttr("style"),e.hide(),e.find(".thanks-popup").hide(),l()}),r()}):"policy"===i?(s.removeClass("active").hide(),a=localStorage.getItem("popup"),(o=n(".dialogs #"+a)).length?(o.addClass("active").show(),e.show()):console.log("Попап с ID "+a+" не найден.")):"details"===i?s.animate({top:"100%",opacity:0},600,function(){e.animate({opacity:0},400,function(){e.find(".popup").removeClass("active").hide(),s.removeAttr("style"),e.hide(),l()}),r()}):"list"===i?s.animate({bottom:"-100%",opacity:0},600,function(){e.animate({opacity:0},300,function(){e.find(".popup").removeClass("active").hide(),s.removeAttr("style"),e.hide(),l()}),r()}):(s.removeClass("active").hide(),e.animate({opacity:0},300,function(){e.hide(),e.find(".thanks-popup").hide(),l(),r()})),pauseOtherVideos(".swiper-slide")});let i=document.querySelectorAll(".work-title-link"),r=document.querySelectorAll(".work-item"),l=null,e=(i.forEach((t,o)=>{t.addEventListener("click",e=>{let a=t.parentElement.parentElement.parentElement;e.preventDefault(),l!==o&&(r.forEach((e,t)=>{e===a?(e.classList.add("u-pointer"),gsap.to(e,{opacity:0,duration:.3,ease:"power2.out"}),gsap.to(a,{opacity:0,duration:.3,ease:"power2.out"})):(e.classList.remove("u-pointer"),gsap.to(e,{opacity:1,duration:.3,ease:"power2.out"}),gsap.to(i[t].parentElement.parentElement,{opacity:1,duration:.3,ease:"power2.out"}))}),l=o,console.log(o))})}),n(document).ready(function(){n(".accordion-header:first").addClass("active"),n(".accordion-content:first").show(),n(".accordion-header").click(function(){var e=n(this).next(".accordion-content");n(".accordion-content").not(e).slideUp(300),n(".accordion-header").not(this).removeClass("active"),n(this).toggleClass("active"),e.slideToggle(300)})}),(wow=new WOW({boxClass:"wow",animateClass:"animated",offset:50,mobile:!0,live:!0})).init(),n(".header__burger").on("click",function(){n(this).toggleClass("active"),n(this).hasClass("active")?n(".burger-menu").addClass("active"):n(".burger-menu").removeClass("active")}),n(document).ready(function(){n(".cases-img").on("load",function(){n(this).closest(".cases-shot-loader").hide()})}),n(document).ready(function(){n(".tab-nav a").click(function(e){e.preventDefault();e=n(this).attr("href");n(".tab-nav li").removeClass("active"),n(this).parent().addClass("active"),n(".tab-content").removeClass("active"),n(e).addClass("active")})}),document.querySelector(".burger")),t=document.querySelector(".mobile-menu"),a=document.querySelector(".mobile-menu__overlay");var o=document.querySelectorAll(".mobile-menu__nav a");function s(){e.classList.remove("active"),t.classList.remove("active"),a.classList.remove("active"),document.body.classList.remove("menu-open")}e&&e.addEventListener("click",function(){e.classList.toggle("active"),t.classList.toggle("active"),a.classList.toggle("active"),document.body.classList.toggle("menu-open")}),a&&a.addEventListener("click",s),o&&o.forEach(e=>{e.addEventListener("click",s)});o=document.querySelectorAll(".portfolio__card-slider");try{o&&o.forEach((e,t)=>{new Swiper(".portfolio__card-slider--"+(t+1),{slidesPerView:1,spaceBetween:20,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}})})}catch(e){console.log(e)}try{new Swiper(".jk-slider",{slidesPerView:1,spaceBetween:20,navigation:{nextEl:".jk-slider-btn--next",prevEl:".jk-slider-btn--prev"},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{320:{slidesPerView:1,spaceBetween:15},640:{slidesPerView:2,spaceBetween:15},1024:{slidesPerView:3,spaceBetween:20},1280:{slidesPerView:4,spaceBetween:20}}})}catch(e){console.log(e)}document.querySelectorAll(".portfolio__card-descr-wrapper").forEach(e=>{let t=e.querySelector(".portfolio__card-descr"),a=e.querySelector(".portfolio__card-descr-toggle");console.log("hhfhf"),a.addEventListener("click",()=>{t.classList.toggle("portfolio__card-descr--expanded"),a.textContent=t.classList.contains("portfolio__card-descr--expanded")?"Свернуть":"Развернуть"})});let c=document.querySelectorAll(".faq__item");c.forEach(t=>{var e=t.querySelector(".faq__question");let a=t.querySelector(".faq__answer");t.classList.contains("active")&&(a.style.maxHeight=a.scrollHeight+"px"),e.addEventListener("click",()=>{var e=t.classList.contains("active");c.forEach(e=>{e!==t&&(e.classList.remove("active"),e.querySelector(".faq__answer").style.maxHeight=null)}),e?(t.classList.remove("active"),a.style.maxHeight=null):(t.classList.add("active"),a.style.maxHeight=a.scrollHeight+"px")})});o={currentStep:1,totalSteps:3,state:{propertyType:null,finishingClass:null,area:76,height:76,rooms:"studio",repairType:null},init(){this.bindEvents(),this.updateCalculation()},bindEvents(){document.querySelectorAll(".calculator__btn--next").forEach(e=>{e.addEventListener("click",()=>this.nextStep())}),document.querySelectorAll(".calculator__btn--prev").forEach(e=>{e.addEventListener("click",()=>this.prevStep())}),document.querySelectorAll('.calculator__option input[type="radio"]').forEach(e=>{e.addEventListener("change",e=>{var t=e.target.name,e=e.target.value;this.state[t]=e,this.updateCalculation()})}),document.querySelectorAll(".calculator__input").forEach(e=>{e.addEventListener("input",e=>{var t=e.target.name,e=parseFloat(e.target.value)||0;this.state[t]=e,this.updateCalculation()})});var e=document.querySelector('.calculator__select[name="rooms"]');e&&e.addEventListener("change",e=>{this.state.rooms=e.target.value,this.updateCalculation()})},nextStep(){this.validateStep()?this.currentStep<this.totalSteps&&(this.currentStep++,this.updateStepDisplay()):alert("Пожалуйста, выберите опцию перед продолжением")},prevStep(){1<this.currentStep&&(this.currentStep--,this.updateStepDisplay())},validateStep(){return 1===this.currentStep?null!==this.state.propertyType:2!==this.currentStep||null!==this.state.finishingClass},updateStepDisplay(){document.querySelectorAll(".calculator__step").forEach((e,t)=>{t+1===this.currentStep?e.classList.add("calculator__step--active"):e.classList.remove("calculator__step--active")}),document.querySelectorAll(".calculator__step-indicator").forEach(e=>{e.textContent=`Шаг ${this.currentStep} / `+this.totalSteps}),document.querySelectorAll(".calculator__btn--prev").forEach(e=>{e.disabled=1===this.currentStep})},updateCalculation(){var{propertyType:e,finishingClass:t,area:a,repairType:o}=this.state,e={"newbuild-no-finish":1,"newbuild-whitebox":.9,secondary:1.1,"old-building":1.3,commercial:1.4,"country-house":1.2}[e]||1,t={budget:1,comfort:1.5,premium:2}[t]||1,i=Math.round(15e3*a*.3*e*({cosmetic:.7,major:1,designer:1.5}[o]||1)),o="designer"===o?Math.round(5e3*a):Math.round(2e3*a),e=Math.round(15e3*a*.15*e),r=Math.round(15e3*a*.4*t),a=Math.round(15e3*a*.6*t),t=i+o+e+r+a;this.updateResultValue("baseWork",i),this.updateResultValue("design",o),this.updateResultValue("roughMaterials",e),this.updateResultValue("finishMaterials",r),this.updateResultValue("furniture",a),this.updateResultValue("total",t)},updateResultValue(e,t){e=document.querySelector(`[data-calc="${e}"]`);e&&(e.textContent=this.formatPrice(t))},formatPrice(e){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}};document.querySelector(".calculator")&&o.init()});
//# sourceMappingURL=index.js.map
